import{_ as g,o as f,j as m,k as t,t as e,D as M,f as p,y as S,v as j,F as y,A as w,z as k,l as $,B as C,g as F,m as A}from"./index-CbcnaPv8.js";import{a as E}from"./app-B-B7yNcS.js";const T={name:"current_month_and_last_month_devided_weeks",props:["currentMonth","lastMonth","id","title"],data(){return{option:{series:[],chart:{type:"bar",height:300,toolbar:{show:!1}},grid:{borderColor:"#f1f1f1",strokeDashArray:3},colors:["rgb(132, 90, 223)","#e4e7ed"],plotOptions:{bar:{colors:{ranges:[{from:-100,to:-46,color:"#ebeff5"},{from:-45,to:0,color:"#ebeff5"}]},columnWidth:"60%",borderRadius:5}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:void 0},legend:{show:!1,position:"top"},yaxis:{title:{style:{color:"#adb5be",fontSize:"13px",fontFamily:"poppins, sans-serif",fontWeight:600,cssClass:"apexcharts-yaxis-label"}},labels:{formatter:function(o){return o.toFixed(0)+""}}},xaxis:{type:"week",categories:[this.$t("global.first_week"),this.$t("global.second_week"),this.$t("global.third_week"),this.$t("global.fourth_week"),this.$t("global.fifth_week")],axisBorder:{show:!0,color:"rgba(119, 119, 142, 0.05)",offsetX:0,offsetY:0},axisTicks:{show:!0,borderType:"solid",color:"rgba(119, 119, 142, 0.05)",width:6,offsetX:0,offsetY:0},labels:{rotate:-90}}}}},watch:{currentMonth:{handler(o,s){setTimeout(()=>{let h=["First Week","Second Week","Third Week","Fourth Week","Fifth Week"],a=[],c=[];h.forEach(b=>{let _=0;this.currentMonth.forEach(r=>{r.week==b&&(_=1,a.push(r.number))}),_==0&&a.push(0),_=0,this.lastMonth.forEach(r=>{r.week==b&&(_=1,c.push(r.number))}),_==0&&c.push(0)}),this.option.series=[{data:a,name:this.$t("global.current_month")},{data:c,name:this.$t("global.last_month")}],document.getElementById(this.id).innerHTML="";var u=new ApexCharts(document.querySelector("#"+this.id),this.option);u.render()},500)}}}},W={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},B={class:"card custom-card"},I={class:"card-header justify-content-between"},D={class:"card-title"},z={class:"card-body py-0 ps-0"},L=["id"];function N(o,s,h,a,c,u){return f(),m("div",W,[t("div",B,[t("div",I,[t("div",D,e(h.title),1)]),t("div",z,[t("div",{id:h.id},null,8,L)])])])}const P=g(T,[["render",N]]),R={props:["total_amount_for_each_month_in_year","total_count_for_each_month_in_year"],data(){return{options:{series:[],chart:{height:380,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1,style:{fontSize:"20px",fontWeight:"bold",colors:["#1421b9"]}},colors:["#1421b9","#FF1654"],stroke:{curve:"straight"},title:{align:"left"},yaxis:[{axisTicks:{show:!0},axisBorder:{show:!0,color:"#1421b9"},labels:{style:{colors:"#1421b9"}},title:{text:this.$t("global.amount"),style:{color:"#1421b9"}}},{opposite:!0,axisTicks:{show:!0},axisBorder:{show:!0,color:"#FF1654"},labels:{style:{colors:"#FF1654"}},title:{text:this.$t("global.number_of_bookings"),style:{color:"#FF1654"}}}],grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[]}}}},watch:{total_amount_for_each_month_in_year:{handler(o,s){setTimeout(()=>{[this.$t("global.january"),this.$t("global.february"),this.$t("global.march"),this.$t("global.april"),this.$t("global.may"),this.$t("global.june"),this.$t("global.july"),this.$t("global.august"),this.$t("global.september"),this.$t("global.october"),this.$t("global.november"),this.$t("global.december")].forEach(_=>{this.options.xaxis.categories.push(_)});let a=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[],u=[];a.forEach(_=>{let r=0;this.total_amount_for_each_month_in_year.forEach(n=>{n.month.trim()==_&&(r=1,c.push(n.total_amount+" "+this.$t("global.sar")))}),r==0&&c.push(0),r=0,this.total_count_for_each_month_in_year.forEach(n=>{n.month.trim()==_&&(r=1,u.push(n.total_count))}),r==0&&u.push(0),r=0}),this.options.series=[{name:this.$t("global.amount"),data:c},{name:this.$t("global.number_of_bookings"),data:u}],document.getElementById("total-amount-for-each-month-in-the-year").innerHTML="";var b=new ApexCharts(document.querySelector("#total-amount-for-each-month-in-the-year"),this.options);b.render()},500)}}}},V={class:"col-xl-12"},q={class:"card custom-card"},O={class:"card-header"},J={class:"card-title"};function H(o,s,h,a,c,u){return f(),m("div",V,[t("div",q,[t("div",O,[t("div",J,e(o.$t("global.total_revenue_and_count_of_bookings_for_each_month_in_the_year")),1)]),s[0]||(s[0]=t("div",{class:"card-body"},[t("div",{id:"total-amount-for-each-month-in-the-year"})],-1))])])}const Y=g(R,[["render",H]]),X={props:["peak_periods"],data(){return{options:{series:[],chart:{height:380,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1,style:{fontSize:"20px",fontWeight:"bold",colors:["#000"]}},colors:["#000"],stroke:{curve:"straight"},title:{align:"left"},yaxis:[{axisTicks:{show:!0},axisBorder:{show:!0,color:"#000"},labels:{style:{colors:"#000"}},title:{text:this.$t("global.number_of_bookings"),style:{color:"#000"}}}],grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[]}}}},watch:{peak_periods:{handler(o,s){setTimeout(()=>{let h=[];this.peak_periods.forEach(c=>{this.options.xaxis.categories.push(c.period),h.push(c.count)}),this.options.series=[{name:this.$t("global.number_of_bookings"),data:h}],document.getElementById("peak-periods").innerHTML="";var a=new ApexCharts(document.querySelector("#peak-periods"),this.options);a.render()},500)}}}},U={class:"col-xl-12"},G={class:"card custom-card"},K={class:"card-header"},Q={class:"card-title"};function Z(o,s,h,a,c,u){return f(),m("div",U,[t("div",G,[t("div",K,[t("div",Q,e(o.$t("global.peak_periods")),1)]),s[0]||(s[0]=t("div",{class:"card-body"},[t("div",{id:"peak-periods"})],-1))])])}const tt=g(X,[["render",Z]]),st={components:{CurrentMonthAndLastMonthDevidedWeeks:P,ChartForTotalAmountAndCountOfEachMonthInYear:Y,ChartForPeakPeriods:tt},setup(){const{t:o}=M({}),s=p(""),h=p(!1),a=p(""),c=p([]);let u=(n=1)=>{h.value=!0,E.get("dashboard/statistics").then(d=>{let i=d.data.data;a.value=i,r(i.clientActiveCount,i.clientDeActiveCount),_(i.invoiceStatisticsMonth);let l=[];l.push(i.processing),l.push(i.delivered),l.push(i.canceled),c.value=l,b()}).catch(d=>{h.value=!1}).finally(()=>{h.value=!1})};S(()=>{j.get("tokenAdmin")&&(s.value=JSON.parse(localStorage.getItem("user")).name),u()});let b=()=>{Chart.defaults.elements.arc.borderWidth=0,Chart.defaults.datasets.doughnut.cutout="85%",new Chart(document.getElementById("leads-source"),{type:"doughnut",data:{datasets:[{label:"My First Dataset",data:c.value||"",backgroundColor:["rgb(245, 184, 73)","rgb(38, 191, 148)","rgb(230, 83, 60)"]}]},plugins:[{afterUpdate:function(n){n.getDatasetMeta(0).data.forEach(function(i){i.round={x:(n.chartArea.left+n.chartArea.right)/2,y:(n.chartArea.top+n.chartArea.bottom)/2,radius:(i.outerRadius+i.innerRadius)/2,thickness:(i.outerRadius-i.innerRadius)/2,backgroundColor:i.options.backgroundColor}})},afterDraw:n=>{const{ctx:d,canvas:i}=n;n.getDatasetMeta(0).data.forEach(l=>{Math.PI/2-l.startAngle;const v=Math.PI/2-l.endAngle;d.save(),d.translate(l.round.x,l.round.y),d.fillStyle=l.options.backgroundColor,d.beginPath(),d.arc(l.round.radius*Math.sin(v),l.round.radius*Math.cos(v),l.round.thickness,0,2*Math.PI),d.closePath(),d.fill(),d.restore()})}}]})},_=(n=[])=>{let d=[],i=[];n.forEach(function(x){d.push(x.total_amount),i.push(x.day)});var l={series:[{name:o("global.amount"),data:d}],chart:{type:"area",height:320,zoom:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"straight"},subtitle:{text:o("global.paymentMoves"),align:"left"},grid:{borderColor:"#f2f5f7"},labels:i,title:{text:o("global.AnalysisOfBillCollectionsDuringTheMonth"),align:"left",style:{fontSize:"13px",fontWeight:"bold",color:"#8c9097"}},colors:["#845adf"],xaxis:{type:"datetime",labels:{show:!0,style:{colors:"#8c9097",fontSize:"11px",fontWeight:600,cssClass:"apexcharts-xaxis-label"}}},yaxis:{opposite:!0,labels:{show:!0,style:{colors:"#8c9097",fontSize:"11px",fontWeight:600,cssClass:"apexcharts-xaxis-label"}}},legend:{horizontalAlign:"left"}},v=new ApexCharts(document.querySelector("#area-basic"),l);v.render()},r=(n=0,d=0)=>{var i={series:[n,d],chart:{height:300,type:"pie"},colors:["#845adf","#e6533c"],labels:[o("global.activated"),o("global.Inactive")],legend:{position:"bottom"},dataLabels:{dropShadow:{enabled:!1}}},l=new ApexCharts(document.querySelector("#client-statistics"),i);l.render()};return{user_name:s,statistics:a}},data(){return{}},mounted(){}},et={class:"container-fluid"},ot={class:"d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb"},at={class:"fw-semibold fs-18 mb-0"},lt={class:"row"},it={class:"col-xxl-9 col-xl-9"},nt={class:"row"},dt={class:"col-xl-4"},ct={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},rt={class:"card custom-card"},ht={class:"card-header"},_t={class:"card-title"},ut={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"},ft={class:"card custom-card"},mt={class:"card-body"},bt={key:0,class:"list-unstyled crm-top-deals mb-0"},vt={class:"d-flex align-items-top flex-wrap"},pt={class:"flex-fill"},gt={class:"fw-semibold mb-0"},xt={class:"text-muted fs-12"},yt={class:"fw-semibold fs-15"},wt={class:"col-xl-8"},kt={class:"row"},$t={class:"col-xxl-6 col-lg-6 col-md-6"},Ct={class:"card custom-card overflow-hidden"},At={class:"card-body"},Mt={class:"d-flex align-items-top justify-content-between"},St={class:"flex-fill ms-3"},jt={class:"d-flex align-items-center justify-content-between flex-wrap"},Ft={class:"text-muted mb-0"},Et={class:"fw-semibold mt-1"},Tt={class:"d-flex align-items-center justify-content-between mt-1"},Wt={class:"col-xxl-6 col-lg-6 col-md-6"},Bt={class:"card custom-card overflow-hidden"},It={class:"card-body"},Dt={class:"d-flex align-items-top justify-content-between"},zt={class:"flex-fill ms-3"},Lt={class:"d-flex align-items-center justify-content-between flex-wrap"},Nt={class:"fw-semibold mt-1"},Pt={class:"d-flex align-items-center justify-content-between mt-1"},Rt={class:"col-xxl-6 col-lg-6 col-md-6"},Vt={class:"card custom-card overflow-hidden"},qt={class:"card-body"},Ot={class:"d-flex align-items-top justify-content-between"},Jt={class:"flex-fill ms-3"},Ht={class:"d-flex align-items-center justify-content-between flex-wrap"},Yt={class:"text-muted mb-0"},Xt={class:"fw-semibold mt-1"},Ut={class:"col-xxl-6 col-lg-6 col-md-6"},Gt={class:"card custom-card overflow-hidden"},Kt={class:"card-body"},Qt={class:"d-flex align-items-top justify-content-between"},Zt={class:"flex-fill ms-3"},ts={class:"d-flex align-items-center justify-content-between flex-wrap"},ss={class:"text-muted mb-0"},es={class:"fw-semibold mt-1"},os={class:"col-xl-12"},as={class:"card custom-card"},ls={class:"card-header"},is={class:"card-title"},ns={class:"col-xxl-3 col-xl-3"},ds={class:"row"},cs={class:"col-xxl-12 col-xl-12"},rs={class:"row"},hs={class:"col-xxl-12 col-xl-12"},_s={class:"card custom-card"},us={class:"card-body p-0 overflow-hidden"},fs={class:"leads-source-chart d-flex align-items-center justify-content-center"},ms={class:"lead-source-value"},bs={class:"d-block fs-14"},vs={class:"d-block fs-25 fw-bold"},ps={class:"row row-cols-12 border-top border-block-start-dashed"},gs={class:"col p-0"},xs={class:"p-3 text-center border-end border-inline-end-dashed"},ys={class:"text-muted fs-12 mb-1 crm-lead-legend mobile d-inline-block"},ws={class:"fs-16 fw-semibold"},ks={class:"col p-0"},$s={class:"p-3 text-center"},Cs={class:"text-muted fs-12 mb-1 crm-lead-legend tablet d-inline-block"},As={class:"fs-16 fw-semibold"},Ms={class:"col p-0"},Ss={class:"p-3 text-center"},js={class:"text-muted fs-12 mb-1 crm-lead-legend canceled d-inline-block"},Fs={class:"fs-16 fw-semibold"},Es={class:"col-xxl-12 col-xl-12"},Ts={class:"card custom-card"},Ws={class:"card-body"},Bs={key:0,class:"list-unstyled crm-top-deals mb-0"},Is={class:"d-flex align-items-top flex-wrap"},Ds={class:"me-2"},zs={class:"avatar avatar-sm avatar-rounded"},Ls=["src"],Ns={class:"flex-fill"},Ps={class:"fw-semibold mb-0"},Rs={class:"fw-semibold fs-15"};function Vs(o,s,h,a,c,u){var _,r,n,d,i;const b=F("router-link");return f(),m("div",et,[t("div",ot,[t("div",null,[t("p",at,e(o.$t("global.WelcomeBack"))+", "+e((_=o.$store.state.authAdmin.user)==null?void 0:_.name)+" !",1),s[0]||(s[0]=t("span",{class:"fs-semibold text-muted"},"اليك بعض الاحصائيات",-1))])]),t("div",lt,[t("div",it,[t("div",nt,[t("div",dt,[t("div",ct,[t("div",rt,[t("div",ht,[t("div",_t,e(o.$t("global.clientStatistics")),1)]),s[1]||(s[1]=t("div",{class:"card-body"},[t("div",{id:"client-statistics"})],-1))])]),t("div",ut,[t("div",ft,[s[2]||(s[2]=t("div",{class:"card-header justify-content-between"},[t("div",{class:"card-title"}," اكثر 5 مستخدمين لديهم طلبات ")],-1)),t("div",mt,[(r=a.statistics)!=null&&r.top_five_users_has_orders?(f(),m("ul",bt,[(f(!0),m(y,null,w(a.statistics.top_five_users_has_orders,l=>(f(),m("li",{key:l.id},[t("div",vt,[t("div",pt,[t("p",gt,e(l.name),1),t("span",xt,e(l.phone),1)]),t("div",yt,e(l.orders_count),1)])]))),128))])):k("",!0)])])])]),t("div",wt,[t("div",kt,[t("div",$t,[t("div",Ct,[t("div",At,[t("div",Mt,[s[5]||(s[5]=t("div",null,[t("span",{class:"avatar avatar-md avatar-rounded bg-primary"},[t("i",{class:"ti ti-users fs-16"})])],-1)),t("div",St,[t("div",jt,[t("div",null,[t("p",Ft,e(o.$t("global.clientCount")),1),t("h4",Et,e(a.statistics.clientCount),1)]),s[3]||(s[3]=t("div",{id:"crm-total-customers"},null,-1))]),t("div",Tt,[t("div",null,[$(b,{to:{name:"user"},class:"text-primary"},{default:C(()=>[A(e(o.$t("global.viewAll")),1),s[4]||(s[4]=t("i",{class:"ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"},null,-1))]),_:1})])])])])])])]),t("div",Wt,[t("div",Bt,[t("div",It,[t("div",Dt,[s[9]||(s[9]=t("div",null,[t("span",{class:"avatar avatar-md avatar-rounded bg-success"},[t("i",{class:"ti ti-package fs-16"})])],-1)),t("div",zt,[t("div",Lt,[t("div",null,[s[6]||(s[6]=t("p",{class:"text-muted mb-0"},"عدد المنتجات",-1)),t("h4",Nt,e(a.statistics.productCount),1)]),s[7]||(s[7]=t("div",{id:"crm-conversion-ratio"},null,-1))]),t("div",Pt,[t("div",null,[$(b,{to:{name:"product"},class:"text-success"},{default:C(()=>[A(e(o.$t("global.viewAll")),1),s[8]||(s[8]=t("i",{class:"ti ti-arrow-narrow-right ms-2 fw-semibold d-inline-block"},null,-1))]),_:1})])])])])])])]),t("div",Rt,[t("div",Vt,[t("div",qt,[t("div",Ot,[s[12]||(s[12]=t("div",null,[t("span",{class:"avatar avatar-md avatar-rounded bg-secondary"},[t("i",{class:"ti ti-file-invoice fs-16"})])],-1)),t("div",Jt,[t("div",Ht,[t("div",null,[t("p",Yt,e(o.$t("global.invoicesCount")),1),t("h4",Xt,e(a.statistics.orderCount),1)]),s[10]||(s[10]=t("div",{id:"crm-total-customers"},null,-1))]),s[11]||(s[11]=t("div",{class:"d-flex align-items-center justify-content-between mt-1"},[t("div")],-1))])])])])]),t("div",Ut,[t("div",Gt,[t("div",Kt,[t("div",Qt,[s[15]||(s[15]=t("div",null,[t("span",{class:"avatar avatar-md avatar-rounded bg-warning"},[t("i",{class:"ti ti-report-money fs-16"})])],-1)),t("div",Zt,[t("div",ts,[t("div",null,[t("p",ss,e(o.$t("global.totalInvoiceRevenue")),1),t("h4",es,e(a.statistics.invoiceRevenue)+" "+e((d=(n=a.statistics.setting)==null?void 0:n.translation)==null?void 0:d.title),1)]),s[13]||(s[13]=t("div",{id:"crm-conversion-ratio"},null,-1))]),s[14]||(s[14]=t("div",{class:"d-flex align-items-center justify-content-between mt-1"},[t("div")],-1))])])])])]),t("div",os,[t("div",as,[t("div",ls,[t("div",is,e(o.$t("global.invoiceStatisticsMonth")),1)]),s[16]||(s[16]=t("div",{class:"card-body"},[t("div",{id:"area-basic"})],-1))])])])])])]),t("div",ns,[t("div",ds,[t("div",cs,[t("div",rs,[t("div",hs,[t("div",_s,[s[18]||(s[18]=t("div",{class:"card-header justify-content-between"},[t("div",{class:"card-title"}," احصائيات الطلبات ")],-1)),t("div",us,[t("div",fs,[s[17]||(s[17]=t("canvas",{id:"leads-source",class:"chartjs-chart w-100 p-4"},null,-1)),t("div",ms,[t("span",bs,e(o.$t("global.total")),1),t("span",vs,e(a.statistics.total_booking),1)])]),t("div",ps,[t("div",gs,[t("div",xs,[t("span",ys,e(o.$t("global.processing")),1),t("div",null,[t("span",ws,e(a.statistics.processing),1)])])]),t("div",ks,[t("div",$s,[t("span",Cs,e(o.$t("global.completed")),1),t("div",null,[t("span",As,e(a.statistics.delivered),1)])])]),t("div",Ms,[t("div",Ss,[t("span",js,e(o.$t("global.canceled")),1),t("div",null,[t("span",Fs,e(a.statistics.canceled),1)])])])])])])]),t("div",Es,[t("div",Ts,[s[19]||(s[19]=t("div",{class:"card-header justify-content-between"},[t("div",{class:"card-title"}," اكثر 5 منتجات مبيعاً ")],-1)),t("div",Ws,[(i=a.statistics)!=null&&i.top_five_products_has_orders?(f(),m("ul",Bs,[(f(!0),m(y,null,w(a.statistics.top_five_products_has_orders,l=>(f(),m("li",{key:l.id},[t("div",Is,[t("div",Ds,[t("span",zs,[t("img",{src:l.image,alt:""},null,8,Ls)])]),t("div",Ns,[t("p",Ps,e(l.name),1)]),t("div",Rs,e(l.order_items_count),1)])]))),128))])):k("",!0)])])])])])])])])])}const Js=g(st,[["render",Vs],["__scopeId","data-v-ec491c55"]]);export{Js as default};
